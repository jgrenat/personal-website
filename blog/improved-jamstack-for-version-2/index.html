<!DOCTYPE html>
  <html lang="en">
  <head>
    <link rel="stylesheet" href="/style.css">
    
    <link rel="preload" href="/elm.js" as="script">
    <link rel="modulepreload" href="/index.js">
    
    <script defer="defer" src="/elm.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script type="module">
import userInit from"/index.js";
let prefetchedPages=[window.location.pathname],initialLocationHash=document.location.hash.replace(/^#/,"");function loadContentAndInitializeApp(){let a=window.location.pathname.replace(/(w)$/,"$1/");a.endsWith("/")||(a+="/");const b=Elm.TemplateModulesBeta.init({flags:{secrets:null,baseUrl:document.baseURI,isPrerendering:!1,isDevServer:!1,isElmDebugMode:!1,contentJson:JSON.parse(document.getElementById("__ELM_PAGES_DATA__").innerHTML),userFlags:userInit.flags()}});return b.ports.toJsPort.subscribe(()=>{loadNamedAnchor()}),b}function loadNamedAnchor(){if(""!==initialLocationHash){const a=document.querySelector(`[name=${initialLocationHash}]`);a&&a.scrollIntoView()}}function prefetchIfNeeded(a){if(a.host===window.location.host&&!prefetchedPages.includes(a.pathname)){prefetchedPages.push(a.pathname),console.log("Preloading...",a.pathname);const b=document.createElement("link");b.setAttribute("as","fetch"),b.setAttribute("rel","prefetch"),b.setAttribute("href",origin+a.pathname+"/content.json"),document.head.appendChild(b)}}const appPromise=new Promise(function(a){document.addEventListener("DOMContentLoaded",()=>{a(loadContentAndInitializeApp())})});userInit.load(appPromise),"function"==typeof connect&&connect(function(a){appPromise.then(b=>{b.ports.fromJsPort.send({contentJson:a})})});const trigger_prefetch=b=>{const c=find_anchor(b.target);c&&c.href&&c.hasAttribute("elm-pages:prefetch")&&prefetchIfNeeded(c)};let mousemove_timeout;const handle_mousemove=a=>{clearTimeout(mousemove_timeout),mousemove_timeout=setTimeout(()=>{trigger_prefetch(a)},20)};addEventListener("touchstart",trigger_prefetch),addEventListener("mousemove",handle_mousemove);function find_anchor(a){for(;a&&"A"!==a.nodeName.toUpperCase();)a=a.parentNode;return a}
    </script>
    <title>ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2 - JoGrenat's Blog</title>
    <meta name="generator" content="elm-pages v2.1.9">
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <link rel="canonical" href="https://www.grenat.eu/blog/improved-jamstack-for-version-2" />    <meta name="description" content="As many developers owning a personal website, I'm more willing to work on the website itsfel than on its content... ðŸ˜… So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!

Let's take this opportunity to talk about Jamstack!" />    <meta property="og:image" content="https://www.datocms-assets.com/53557/1633339107-home-maderedcurrantjam-jarsbetweenpulpresidueandstalks.jpg?fit=crop&max-h=250&max-w=800" />    <meta property="og:image:secure_url" content="https://www.datocms-assets.com/53557/1633339107-home-maderedcurrantjam-jarsbetweenpulpresidueandstalks.jpg?fit=crop&max-h=250&max-w=800" />    <meta property="og:image:alt" content="ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2" />    <meta property="og:title" content="ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2" />    <meta property="og:url" content="https://www.grenat.eu/blog/improved-jamstack-for-version-2" />    <meta property="og:description" content="As many developers owning a personal website, I'm more willing to work on the website itsfel than on its content... ðŸ˜… So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!

Let's take this opportunity to talk about Jamstack!" />    <meta property="og:site_name" content="JoGrenat's Blog" />    <meta property="twitter:card" content="summary" />    <meta property="twitter:title" content="ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2" />    <meta property="twitter:description" content="As many developers owning a personal website, I'm more willing to work on the website itsfel than on its content... ðŸ˜… So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!

Let's take this opportunity to talk about Jamstack!" />    <meta property="twitter:image" content="https://www.datocms-assets.com/53557/1633339107-home-maderedcurrantjam-jarsbetweenpulpresidueandstalks.jpg?fit=crop&max-h=250&max-w=800" />    <meta property="twitter:image:alt" content="ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2" />    <meta property="og:type" content="website" />    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />    <link rel="icon" sizes="16x16" type="image/png" href="https://www.datocms-assets.com/53557/1629202623-favicon.png?h=16&w=16" />    <link rel="icon" sizes="32x32" type="image/png" href="https://www.datocms-assets.com/53557/1629202623-favicon.png?h=32&w=32" />    <link rel="icon" sizes="96x96" type="image/png" href="https://www.datocms-assets.com/53557/1629202623-favicon.png?h=96&w=96" />    <link rel="icon" sizes="192x192" type="image/png" href="https://www.datocms-assets.com/53557/1629202623-favicon.png?h=192&w=192" />
    <script id="__ELM_PAGES_DATA__" type="application/json">{"staticData":{"420756529":"{\"items\":[{\"id\":{\"videoId\":\"V2DgGyH6D_k\"}},{\"id\":{\"videoId\":\"Zp4p7DiWMuA\"}},{\"id\":{\"videoId\":\"WToGeMIdoSY\"}},{\"id\":{\"videoId\":\"AQkCgGajhxg\"}},{\"id\":{\"videoId\":\"uFzBmBoSrS0\"}}]}","1142833480":"{\"title\":\"[Code in the Unknown] Adding a \\\"cancel\\\" action to a chess game\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/Zp4p7DiWMuA/hqdefault.jpg\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"113\\\" src=\\\"https://www.youtube.com/embed/Zp4p7DiWMuA?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\\" allowfullscreen title=\\\"[Code in the Unknown] Adding a &quot;cancel&quot; action to a chess game\\\"></iframe>\"}","2243736650":"{\"title\":\"Discovering Supabase, a Firebase alternative based on PostgreSQL (part 2)\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/V2DgGyH6D_k/hqdefault.jpg\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"113\\\" src=\\\"https://www.youtube.com/embed/V2DgGyH6D_k?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\\" allowfullscreen title=\\\"Discovering Supabase, a Firebase alternative based on PostgreSQL (part 2)\\\"></iframe>\"}","2730572102":"{\"title\":\"Creating a Elm package for DatoCMS (part 3)\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/uFzBmBoSrS0/hqdefault.jpg\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"113\\\" src=\\\"https://www.youtube.com/embed/uFzBmBoSrS0?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\\" allowfullscreen title=\\\"Creating a Elm package for DatoCMS (part 3)\\\"></iframe>\"}","2886442429":"{\"title\":\"Discovering Supabase, a Firebase alternative based on PostgreSQL\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/WToGeMIdoSY/hqdefault.jpg\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"113\\\" src=\\\"https://www.youtube.com/embed/WToGeMIdoSY?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\\" allowfullscreen title=\\\"Discovering Supabase, a Firebase alternative based on PostgreSQL\\\"></iframe>\"}","2986682595":"{\"title\":\"Creating a Elm package for DatoCMS (last part)\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/AQkCgGajhxg/hqdefault.jpg\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"113\\\" src=\\\"https://www.youtube.com/embed/AQkCgGajhxg?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\\\" allowfullscreen title=\\\"Creating a Elm package for DatoCMS (last part)\\\"></iframe>\"}","3644372390":"{\"data\":{\"websiteConfiguration\":{\"name12867311\":\"JoGrenat's Blog\",\"youtubeChannelId12867311\":\"UCROJRWWGrrTmgGF1Wo9OX5w\",\"twitterIcon\":{\"url3832528868\":\"https://www.datocms-assets.com/53557/1632324226-twitterbird.svg\"},\"footerText12867311\":\"*Blog powered by [elm-pages](https://elm-pages.com/)*\"},\"_site\":{\"globalSeo\":{\"fallbackSeo\":{\"image\":{\"url1831060520\":\"https://www.datocms-assets.com/53557/1632838280-capture-d-ecran-2021-09-28-a-16-11-09.png?fit=fill&max-h=150&max-w=300\"}}}}}}","3787950683":"{\"data\":{\"homePage\":{\"picture\":{\"url4062855192\":\"https://www.datocms-assets.com/53557/1630943458-profil-200.jpg?crop64=Zm9jYWxwb2ludCxmYWNlcyxlbnRyb3B5&fit=crop&h=80&mask=ellipse&w=80\"},\"introductionText12867311\":\"Passionate web developer, caring for user experience and code quality. In this blog, I share my discoveries and reflexions.\"},\"article1419540864\":{\"name1875757806\":\"\uD83C\uDDEC\uD83C\uDDE7  Improved Jamstack for the V2\",\"banner\":{\"url1984142787\":\"https://www.datocms-assets.com/53557/1633339107-home-maderedcurrantjam-jarsbetweenpulpresidueandstalks.jpg?fit=crop&max-h=250&max-w=800\"},\"content103746919\":{\"value3343696236\":{\"schema\":\"dast\",\"document\":{\"type\":\"root\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"As many developers owning a personal website, I'm more willing to work on the website itsfel than on its content... \uD83D\uDE05So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"Of course, this wasn't the only reason, leading to the perfect opportunity to talk about Jamstack!\"}]},{\"type\":\"heading\",\"level\":2,\"children\":[{\"type\":\"span\",\"value\":\"First version\"}]},{\"item\":\"62414454\",\"type\":\"block\"},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"The first version of this website was built with \"},{\"url\":\"https://elm-pages.com/\",\"type\":\"link\",\"children\":[{\"type\":\"span\",\"value\":\"elm-pages\"}]},{\"type\":\"span\",\"value\":\", a really cool tool created by Dillon Kearns to generate static websites. A static website contrasts with traditional websites because there is no generation of HTML, CSS or JS files at request time, all files are static and ready to be served.\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"With a static website generator, you can do the heavy work once at build time and then serve the page to many people in a fast and efficient way. In fact, this looks a lot like Single-Page Application, but there is a big difference: after the build, most of the data is already present in static website files. in a SPA, you would load those files and then load the data using HTTP requests to an API for example.\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"This brings many advantages: pages load incredibly fast, you can combine your website with whatever backend or content repository you want, your website is SEO-friendly and hosting infrastructure is simpler and cheaper as you only need a CDN. Conceptually, there also is a big shift: as most of your requests happen at build time, there can't be any failure at request time because your backend or data source is not available. \"},{\"type\":\"span\",\"marks\":[\"strong\"],\"value\":\"You can write HTTP requests that won't fail\"},{\"type\":\"span\",\"value\":\", because if they do fail, it will be at build time and won't affect the live version of your website!\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"In the first version of this website the datasource was pretty simple: I was using markdown files for my articles, with metadata at the beginning of the file:\"}]},{\"code\":\"---\\n  \\\"type\\\": \\\"blog\\\",\\n  \\\"author\\\": \\\"Author name\\\",\\n  \\\"title\\\": \\\"Title of the article\\\",\\n  \\\"description\\\": \\\"Description of the article\\\",\\n  \\\"image\\\": \\\"Cover image, stored inside the GitHub repository\\\",\\n  \\\"published\\\": \\\"2020-06-17\\\",\\n---\\n\\nContent of the article *using* __markdown__\",\"type\":\"code\",\"language\":\"markdown\"},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"Writing a new article meant creating a new file with a somewhat limited user experience inside my IDE, even if I find markdown pleasant to write. The cumbersome part was that I needed to add any image inside the repository too and optimize them manually. So here comes version 2.\"}]},{\"type\":\"heading\",\"level\":2,\"children\":[{\"type\":\"span\",\"value\":\"New version\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"Elm-pages V2 made far more easy to use GraphQL APIs as a datasource. That's why I've chosen to use a headless CMS I was using at work: \"},{\"url\":\"https://www.datocms.com/\",\"type\":\"link\",\"children\":[{\"type\":\"span\",\"value\":\"DatoCMS\"}]},{\"type\":\"span\",\"value\":\". Their interface is really nice and I can use the media manager to import images, with a smart CDN optimizing them automatically. (Disclaimer: it's not affiliate marketing, I really like their product, but there are many other headless CMS that are really nice like \"},{\"url\":\"https://strapi.io/\",\"type\":\"link\",\"children\":[{\"type\":\"span\",\"value\":\"Strapi\"}]},{\"type\":\"span\",\"value\":\").\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"A headless CMS is like a traditional CMS that don't handle the website appearance: it only deals with data and make it accessible through APIs (often GraphQL APIs as it's very flexible for the requester). Free from the complexity of displaying the data, headless CMS can really focus on having a great editor interface. In fact, this looks a lot like the separation of concerns in the Elm architecture where the \"},{\"type\":\"span\",\"marks\":[\"code\"],\"value\":\"update\"},{\"type\":\"span\",\"value\":\" focuses on data and the \"},{\"type\":\"span\",\"marks\":[\"code\"],\"value\":\"view\"},{\"type\":\"span\",\"value\":\" focuses on the appearance. \"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"By combining a headless CMS with a static website generator, I've come across the Jamstack territory:\"}]},{\"type\":\"list\",\"style\":\"bulleted\",\"children\":[{\"type\":\"listItem\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"marks\":[\"code\"],\"value\":\"J\"},{\"type\":\"span\",\"value\":\" stands for JavaScript (well, in my case Elm, buts it's compiled in JavaScript after the build! \uD83D\uDE04) In the JavaScript world, you can use generators like Gatsby, Hugo, ...\"}]}]},{\"type\":\"listItem\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"marks\":[\"code\"],\"value\":\"A\"},{\"type\":\"span\",\"value\":\" stands for API. Here, it's a GraphQL API from a headless CMS, but it can come from anywhere: a backend in PHP, Java, a public API, markdown files, etc.\"}]}]},{\"type\":\"listItem\",\"children\":[{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"marks\":[\"code\"],\"value\":\"M\"},{\"type\":\"span\",\"value\":\" stands for Markup, meaning pre-rendered markup.\"}]}]}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"As I've said in the first part, there are a lot of advantages of using a Jamstack approach rather than a traditional server-generated website or a SPA. \"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"First, your website has great performances because serving static files is easy with a CDN and can be scaled with almost no cost. Which leads us to the second point: the hosting is cheap, beause you don't need a dynamic server running to generate your pages. Third, jamstack is SEO-friendly, as your content is static and requestable by crawlers. If your datasource is down, your website is still available as it's already been built. Finally, you don't need to publicly expose your API to the users so it's a bit more secure.\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"Are there any drawbacks to this approach? If you data is often changing, it's quite expensive to rebuild the pages at each change. But nothing prevents you from doing some work at request time like in a traditional Single Page Application: you can request data that barely change at build time, then do an API call at request time. \"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"span\",\"value\":\"For my website, I've bet on jamstack and I'm not regretting it! Having improved a lot my writer experience, let's now hope that I'll focus more on the articles and not on a future V3! \uD83D\uDE04\"}]}]}},\"blocks\":[{\"id1492635460\":\"62414454\",\"image\":{\"url3832528868\":\"https://www.datocms-assets.com/53557/1633339232-preview-home-page.png\",\"alt12867311\":\"Preview of the first version of this website\"},\"fullWidth812510750\":true}],\"links\":[]},\"description12867311\":\"As many developers owning a personal website, I'm more willing to work on the website itsfel than on its content... \uD83D\uDE05 So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!\\n\\nLet's take this opportunity to talk about Jamstack!\",\"bannerAttribution\":[{\"author12867311\":\"Franz van Duns\",\"licenseName12867311\":\"CC BY-SA 4.0\",\"licenseLink12867311\":\"https://creativecommons.org/licenses/by-sa/4.0/deed.en\"}]}}}"},"is404":false,"path":"blog/improved-jamstack-for-version-2"}</script>
    </head>
    <body>
      <div data-url="" display="none"></div>
      <div><span class="elm-css-style-wrapper" style="display: none;"><style></style></span><span class="elm-css-style-wrapper" style="display: none;"><style>.footer{padding-top:0;padding-bottom:0;font-size:1rem;}
.footerContent{margin:1rem 0;}
.footerContent  h2{font-size:2.2rem;font-weight:900;text-align:left;margin:3.5rem 0 1rem;}
.footerContent  h3{font-size:1.8rem;font-weight:600;text-align:left;margin:3vh 0 1vh;color:rgba(0,0,0,0.8);}
.footerContent  h4{font-size:1.2rem;font-weight:200;text-align:left;margin:2vh 0 1vh;color:rgba(0,0,0,0.6);}
.footerContent  p{margin:2.5rem 0;line-height:2rem;white-space:pre-wrap;text-align:justify;color:rgba(0,0,0,0.8);}
.footerContent  p > code{background-color:rgba(225,225,255,0.7);padding:1px 3px;font-size:0.7em;}
.footerContent  blockquote{border-left:5px solid rgba(5,117,230,0.8);background-color:rgba(5,117,230,0.1);padding:0.01vh 1vw;max-width:650px;margin:2.5rem auto;}
@media only screen and (max-width: 600px){.footerContent  blockquote{border-left:0;border-top:5px solid rgba(5,117,230,0.8);padding:0.01vh 3vw;}}
.footerContent  blockquote > p:first-child{margin-top:1rem;}
.footerContent  blockquote > p:last-child{margin-bottom:1rem;}
.footerContent  strong{font-weight:900;color:rgb(0,0,0);}
.footerContent  em{font-style:italic;}
.footerContent  a{text-decoration:underline;}
.footerContent  a:hover{text-decoration:none;}
.footerContent  .thanks{margin-top:2vw;font-style:italic;font-size:0.8em;text-align:right;}
.footerContent  ul{list-style-type:disc;padding-left:1rem;margin-left:2vh;}
.footerContent  ul > li + li{margin-top:2vh;}
.footerContent  pre{max-width:100%;overflow-y:scroll;}
.footerContent  code{line-height:1.7rem;font-size:0.85em;}
.footerContent  img{max-width:100%;}
.footerContent  img.fullWidth{width:100%;}
.footerContent > :first-child{margin-top:0;}
.footerContent > :last-child{margin-bottom:0;}
.footerContent  p{text-align:right;}</style></span><main class="container"><span class="elm-css-style-wrapper" style="display: none;"><style>.site-title{display:flex;justify-content:space-between;align-items:center;font-size:1.5rem;margin:0.5rem 0 2rem;}
.site-title  a{text-decoration:none;}
.site-title  img{width:2rem;transition:transform 100ms  ;}
.site-title  img:hover{transform:scale(1.5);}
.site-title  .site-name{transition:transform 100ms  ;transform-origin:center left;}
.site-title  .site-name:hover{transform:scale(1.1);}
.article{margin-top:20px;}
.article  .article-title{font-size:3rem;text-align:center;margin-bottom:3rem;font-weight:900;}
.article  .article-banner{width:100%;padding-top:31.25%;position:relative;}
.article  .article-banner.article-banner--withAttribution{margin-bottom:4rem;}
.article  .article-banner.article-banner--withAttribution  figcaption{position:absolute;top:103%;left:0;width:100%;text-align:center;font-size:0.8rem;color:rgba(0,0,0,0.7);}
.article  .article-banner.article-banner--withAttribution  figcaption  em{font-style:italic;}
.article  .article-banner  img{position:absolute;top:0;left:0;width:100%;height:100%;}
.article  .article-content{margin-bottom:5vh;}
.article  .article-content  h2{font-size:2.2rem;font-weight:900;text-align:left;margin:3.5rem 0 1rem;}
.article  .article-content  h3{font-size:1.8rem;font-weight:600;text-align:left;margin:3vh 0 1vh;color:rgba(0,0,0,0.8);}
.article  .article-content  h4{font-size:1.2rem;font-weight:200;text-align:left;margin:2vh 0 1vh;color:rgba(0,0,0,0.6);}
.article  .article-content  p{margin:2.5rem 0;line-height:2rem;white-space:pre-wrap;text-align:justify;color:rgba(0,0,0,0.8);}
.article  .article-content  p > code{background-color:rgba(225,225,255,0.7);padding:1px 3px;font-size:0.7em;}
.article  .article-content  blockquote{border-left:5px solid rgba(5,117,230,0.8);background-color:rgba(5,117,230,0.1);padding:0.01vh 1vw;max-width:650px;margin:2.5rem auto;}
@media only screen and (max-width: 600px){.article  .article-content  blockquote{border-left:0;border-top:5px solid rgba(5,117,230,0.8);padding:0.01vh 3vw;}}
.article  .article-content  blockquote > p:first-child{margin-top:1rem;}
.article  .article-content  blockquote > p:last-child{margin-bottom:1rem;}
.article  .article-content  strong{font-weight:900;color:rgb(0,0,0);}
.article  .article-content  em{font-style:italic;}
.article  .article-content  a{text-decoration:underline;}
.article  .article-content  a:hover{text-decoration:none;}
.article  .article-content  .thanks{margin-top:2vw;font-style:italic;font-size:0.8em;text-align:right;}
.article  .article-content  ul{list-style-type:disc;padding-left:1rem;margin-left:2vh;}
.article  .article-content  ul > li + li{margin-top:2vh;}
.article  .article-content  pre{max-width:100%;overflow-y:scroll;}
.article  .article-content  code{line-height:1.7rem;font-size:0.85em;}
.article  .article-content  img{max-width:100%;}
.article  .article-content  img.fullWidth{width:100%;}
.author-card{display:flex;align-items:center;margin-top:2.5rem;}
.author-card > .author-picture{margin-right:1rem;}
.author-card > .author-description{text-align:justify;font-size:1rem;line-height:1.5rem;}</style></span><div class="site-title"><a class="site-name" elm-pages:prefetch="" href="/">JoGrenat&#039;s Blog</a><a href="https://twitter.com/JoGrenat"><img src="https://www.datocms-assets.com/53557/1632324226-twitterbird.svg"></a></div><section class="article"><h1 class="article-title">ðŸ‡¬ðŸ‡§  Improved Jamstack for the V2</h1><figure class="article-banner article-banner--withAttribution" aria-hidden="true"><img alt="" src="https://www.datocms-assets.com/53557/1633339107-home-maderedcurrantjam-jarsbetweenpulpresidueandstalks.jpg?fit=crop&max-h=250&max-w=800"><figcaption>Image by <em>Franz van Duns</em> under the <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank">CC BY-SA 4.0</a> license</figcaption></figure><div class="article-content"><div><p>As many developers owning a personal website, I&#039;m more willing to work on the website itsfel than on its content... ðŸ˜…So when elm-pages V2 was released, this was the perfect justification to start over and rebuild everything from scratch!</p><p>Of course, this wasn&#039;t the only reason, leading to the perfect opportunity to talk about Jamstack!</p><h2>First version</h2><img class="fullWidth" alt="Preview of the first version of this website" src="https://www.datocms-assets.com/53557/1633339232-preview-home-page.png"><p>The first version of this website was built with <a href="https://elm-pages.com/">elm-pages</a>, a really cool tool created by Dillon Kearns to generate static websites. A static website contrasts with traditional websites because there is no generation of HTML, CSS or JS files at request time, all files are static and ready to be served.</p><p>With a static website generator, you can do the heavy work once at build time and then serve the page to many people in a fast and efficient way. In fact, this looks a lot like Single-Page Application, but there is a big difference: after the build, most of the data is already present in static website files. in a SPA, you would load those files and then load the data using HTTP requests to an API for example.</p><p>This brings many advantages: pages load incredibly fast, you can combine your website with whatever backend or content repository you want, your website is SEO-friendly and hosting infrastructure is simpler and cheaper as you only need a CDN. Conceptually, there also is a big shift: as most of your requests happen at build time, there can&#039;t be any failure at request time because your backend or data source is not available. <strong>You can write HTTP requests that won&#039;t fail</strong>, because if they do fail, it will be at build time and won&#039;t affect the live version of your website!</p><p>In the first version of this website the datasource was pretty simple: I was using markdown files for my articles, with metadata at the beginning of the file:</p><pre><code class="lang-markdown">---
  &quot;type&quot;: &quot;blog&quot;,
  &quot;author&quot;: &quot;Author name&quot;,
  &quot;title&quot;: &quot;Title of the article&quot;,
  &quot;description&quot;: &quot;Description of the article&quot;,
  &quot;image&quot;: &quot;Cover image, stored inside the GitHub repository&quot;,
  &quot;published&quot;: &quot;2020-06-17&quot;,
---

Content of the article *using* __markdown__</code></pre><p>Writing a new article meant creating a new file with a somewhat limited user experience inside my IDE, even if I find markdown pleasant to write. The cumbersome part was that I needed to add any image inside the repository too and optimize them manually. So here comes version 2.</p><h2>New version</h2><p>Elm-pages V2 made far more easy to use GraphQL APIs as a datasource. That&#039;s why I&#039;ve chosen to use a headless CMS I was using at work: <a href="https://www.datocms.com/">DatoCMS</a>. Their interface is really nice and I can use the media manager to import images, with a smart CDN optimizing them automatically. (Disclaimer: it&#039;s not affiliate marketing, I really like their product, but there are many other headless CMS that are really nice like <a href="https://strapi.io/">Strapi</a>).</p><p>A headless CMS is like a traditional CMS that don&#039;t handle the website appearance: it only deals with data and make it accessible through APIs (often GraphQL APIs as it&#039;s very flexible for the requester). Free from the complexity of displaying the data, headless CMS can really focus on having a great editor interface. In fact, this looks a lot like the separation of concerns in the Elm architecture where the <code>update</code> focuses on data and the <code>view</code> focuses on the appearance. </p><p>By combining a headless CMS with a static website generator, I&#039;ve come across the Jamstack territory:</p><ul><li><p><code>J</code> stands for JavaScript (well, in my case Elm, buts it&#039;s compiled in JavaScript after the build! ðŸ˜„) In the JavaScript world, you can use generators like Gatsby, Hugo, ...</p></li><li><p><code>A</code> stands for API. Here, it&#039;s a GraphQL API from a headless CMS, but it can come from anywhere: a backend in PHP, Java, a public API, markdown files, etc.</p></li><li><p><code>M</code> stands for Markup, meaning pre-rendered markup.</p></li></ul><p>As I&#039;ve said in the first part, there are a lot of advantages of using a Jamstack approach rather than a traditional server-generated website or a SPA. </p><p>First, your website has great performances because serving static files is easy with a CDN and can be scaled with almost no cost. Which leads us to the second point: the hosting is cheap, beause you don&#039;t need a dynamic server running to generate your pages. Third, jamstack is SEO-friendly, as your content is static and requestable by crawlers. If your datasource is down, your website is still available as it&#039;s already been built. Finally, you don&#039;t need to publicly expose your API to the users so it&#039;s a bit more secure.</p><p>Are there any drawbacks to this approach? If you data is often changing, it&#039;s quite expensive to rebuild the pages at each change. But nothing prevents you from doing some work at request time like in a traditional Single Page Application: you can request data that barely change at build time, then do an API call at request time. </p><p>For my website, I&#039;ve bet on jamstack and I&#039;m not regretting it! Having improved a lot my writer experience, let&#039;s now hope that I&#039;ll focus more on the articles and not on a future V3! ðŸ˜„</p></div></div></section><aside class="author-card"><img class="author-picture" src="https://www.datocms-assets.com/53557/1630943458-profil-200.jpg?crop64=Zm9jYWxwb2ludCxmYWNlcyxlbnRyb3B5&fit=crop&h=80&mask=ellipse&w=80"><p class="author-description">Passionate web developer, caring for user experience and code quality. In this blog, I share my discoveries and reflexions.</p></aside></main><footer class="container footer"><div class="footerContent"><p><em>Blog powered by <a href="https://elm-pages.com/">elm-pages</a></em></p></div></footer></div>
    </body>
  </html>
  